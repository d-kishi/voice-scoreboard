# Task 1.1: Expoプロジェクトの作成と基本設定

## Plan（実装前の方針）
- Expo SDK 52 + TypeScript で手動セットアップ（`create-expo-app` は最新 SDK に固定されるため不使用）
- 横画面専用（landscape）、ダークモード背景（#0f172a）
- ESLint legacy 形式（.eslintrc.js）+ Prettier
- Jest（jest-expo preset）+ @testing-library/react-native
- Feature-based + Clean Architecture 軽量版のディレクトリ構造を作成
- Expo Router 不使用（シングルスクリーンアプリ）

## 実施内容
- tasks.md の Task 1.1: Expoプロジェクトの作成と基本設定
  - Expo SDK 52 + TypeScript テンプレートで新規プロジェクト作成
  - 横画面（ランドスケープ）専用に画面方向を固定
  - ESLint / Prettier の設定
  - Jest + React Native Testing Library のテスト環境構築

## 実装結果

### 作成ファイル
| ファイル | 役割 |
|---------|------|
| `package.json` | 依存関係・scripts・Jest 設定 |
| `app.json` | Expo 設定（landscape, dark mode, #0f172a） |
| `tsconfig.json` | TypeScript strict + パスエイリアス @/* → src/* |
| `babel.config.js` | babel-preset-expo |
| `metro.config.js` | @expo/metro-config デフォルト設定 |
| `.eslintrc.js` | ESLint（expo + prettier） |
| `.prettierrc` | Prettier ルール（singleQuote, trailingComma=all, printWidth=100） |
| `jest.setup.ts` | @testing-library/react-native/extend-expect |
| `.watchmanconfig` | Watchman タイムアウト対策（WSL 環境） |
| `index.js` | registerRootComponent エントリポイント |
| `App.tsx` | 仮 UI + useKeepAwake |
| `App.test.tsx` | スモークテスト |
| `assets/icon.png` | アプリアイコン（プレースホルダー） |
| `assets/splash-icon.png` | スプラッシュアイコン（プレースホルダー） |
| `assets/adaptive-icon.png` | Android adaptive アイコン（プレースホルダー） |
| `src/` | Feature-based ディレクトリ構造（.gitkeep） |

### 依存関係
- **コア**: expo@52.0.49, react@18.3.1, react-native@0.76.9, expo-keep-awake@14.0.3, expo-screen-orientation@8.0.4, expo-status-bar@2.0.1
- **開発**: typescript@5.3.3, @types/react@18.3.28, @types/jest@30.0.0, @babel/core@7.29.0, jest@29.7.0, jest-expo@52.0.6, @testing-library/react-native@12.9.0, eslint@8.57.1, eslint-config-expo@8.0.1, eslint-config-prettier@9.1.2, prettier@3.8.1

### 検証結果
- `bun run typecheck` — エラー 0 ✓
- `bun run lint` — エラー 0 ✓
- `bun run test` — 1 test passed ✓

## 問題点・乖離
- Jest の設定プロパティ名を `setupFilesAfterSetup` と誤記 → 正しくは `setupFilesAfterEnv`
- WSL で Watchman タイムアウト → `.watchmanconfig` 配置 + node crawler フォールバックで解決
- `@types/jest` が package.json に不足 → 追加で TypeScript 型エラーを解消
- react-native@0.76.7 → `bunx expo install --check` で 0.76.9 に修正
- `unrs-resolver` の postinstall ブロック → `bun pm trust` で解決（既知問題）

## 意思決定ログ
| 選択肢 | 採用 | 理由 |
|--------|------|------|
| create-expo-app vs 手動セットアップ | 手動 | SDK 52 固定には手動が確実（MEMORY.md） |
| Expo Router vs 直接 registerRootComponent | 直接 | シングルスクリーンアプリに Router は不要 |
| ESLint flat config vs legacy | legacy（.eslintrc.js） | Expo SDK 52 は legacy 形式が公式推奨 |
| jest.setup.js vs jest.setup.ts | .ts | TypeScript import で型定義が正しく認識される |
| newArchEnabled | true | Expo SDK 52 デフォルト + React Native 0.76 で安定 |

## 学び（Lessons Learned）
- Jest の `setupFilesAfterEnv` は正確な名前。`setupFilesAfterSetup` は存在しない
- `@types/jest` は devDependencies に明示的に必要（jest-expo が自動提供しない）
- `bunx expo install --check` で SDK 互換バージョンを確認するのが確実
- WSL 環境では `.watchmanconfig` が必須（node crawler フォールバック）
